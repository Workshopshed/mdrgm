<html>
<body>
<p>Test connect to any</p>
 <button onclick="dowork()">Click me</button> 
 
<script>
  /* Must be user initiated */
 function dowork() {
 
 document.write('Connect to BlueTooth');
  navigator.bluetooth.requestDevice({   
  acceptAllDevices: true,
  optionalServices: ['battery_service']
 
  })
.then(device => device.gatt.connect())
.then(server => {
  // Getting Battery Service...
  return server.getPrimaryService('battery_service');
})
.then(service => {
  // Getting Battery Level Characteristic...
  return service.getCharacteristic('battery_level');
})
.then(characteristic => {
  // Reading Battery Level...
  return characteristic.readValue();
})
.then(value => {
  document.write('Battery percentage is ' + value.getUint8(0));
})
.catch(error => { document.write(error); });
}

  </script>
</body>
</html>
